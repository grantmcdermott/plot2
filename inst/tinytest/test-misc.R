source("helpers.R")
using("tinysnapshot")

f = function() {
  par(mfrow = c(1, 2))
  plot(Temp ~ Day, data = airquality, log = "x")
  plot2(Temp ~ Day, data = airquality, log = "x")
} 
expect_snapshot_plot(f, label = "arg_log_x")

f = function() {
  par(mfrow = c(1, 2))
  plot(Temp ~ Day, data = airquality, log = "y")
  plot2(Temp ~ Day, data = airquality, log = "y")
} 
expect_snapshot_plot(f, label = "arg_log_y")

f = function() {
  par(mfrow = c(1, 2))
  plot(Temp ~ Day, data = airquality, log = "xy")
  plot2(Temp ~ Day, data = airquality, log = "xy")
} 
expect_snapshot_plot(f, label = "arg_log_xy")

f = function() {
  par(mfrow = c(1, 2))
  plot(Temp ~ Day, data = airquality, log = "yx")
  plot2(Temp ~ Day, data = airquality, log = "yx")
} 
expect_snapshot_plot(f, label = "arg_log_yx")

f = function() {
  par(mfrow = c(1, 1))
  pred = predict(lm(mpg~wt+factor(cyl),mtcars), interval = "confidence")
  m = cbind(mtcars, pred)
  with(
    m,
    plot2(wt, fit, ymin = lwr, ymax = upr, by = cyl, type = "ribbon", grid = TRUE)
  )
  with(
    m,
    plot2(wt, mpg, by = cyl, pch = 16, add = TRUE)
  )
}
expect_snapshot_plot(f, label = "addTRUE")